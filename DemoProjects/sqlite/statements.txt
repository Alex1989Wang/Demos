CREATE TABLE IF NOT EXISTS 'XDMessageContentTbl' (        
                                  PK INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,                             
                                  myUID INTEGER NOT NULL ,                                                   
                                  subjectID TEXT NOT NULL,                                                   
                                  isSent INTEGER NOT NULL,                                                   
                                  seqNum TEXT NOT NULL,                                                      
                                  msgType INTEGER NOT NULL,                                                  
                                  msgContent TEXT NOT NULL,                                                  
                                  sentTime INTEGER,                                                          
                                  notRead INTEGER,                                                           
                                  deleted INTEGER NOT NULL,                                                  
                                  msgBaseContent TEXT NOT NULL,                                              
                                  msgTipsContent TEXT NOT NULL);

CREATE TABLE IF NOT EXISTS 'XDMessageSubjectsTbl' (        
                                  PK INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,                             
                                         myUID INTEGER NOT NULL ,                                                   
                                         subjectID TEXT NOT NULL,                                                   
                                         subjectName TEXT NOT NULL,                                                 
                                         subjectLogo TEXT,                                                 
                                         subjectSex INTEGER,                                                        
                                         subjectBirth TEXT);

INSERT INTO 'XDMessageContentTbl' SELECT PK, myUID, subjectID, isSent, seqNum, msgType, msgContent, sentTime, notRead, deleted, msgBaseContent, msgTipsContent FROM 'messagesTbl';

INSERT INTO 'XDMessageSubjectsTbl' (myUID, subjectID, subjectName, subjectLogo, subjectSex, subjectBirth) SELECT myUID, subjectID, subjectName, subjectLogo, subjectSex, subjectBirth FROM 'messagesTbl' GROUP BY subjectID;

DROP TABLE 'messagesTbl';


